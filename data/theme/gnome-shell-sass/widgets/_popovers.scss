/* Popovers/Menus */

.popup-menu {
	min-width: 15em;
	color: $fg_color;
	border-color: $bubble_borders_color;

	.popup-sub-menu {
		background-color: darken($bg_color,5%);
		box-shadow: inset 0 -1px 0px $bubble_borders_color;
	}

	.popup-menu-content { padding: calc(#{$base_padding} * 2 + #{$base_margin}) 0; }

	// menu items
	.popup-menu-item {
		spacing: $base_padding;

		&:ltr { padding: .4em 1.75em .4em 0em; }
		&:rtl { padding: .4em 0em .4em 1.75em; }

		&:checked {
			background-color: $bg_color;
			box-shadow: inset 0 -1px 0px $bubble_borders_color;
			font-weight: bold;
		}
		&.selected {
			background-color: transparentize(white, if($variant=='light', 0.2, 0.9));
			color: $fg_color;
		}
		&:active { 
			background-color: $selected_bg_color;
			color: $selected_fg_color;
		 }
		&:insensitive { color: transparentize($fg_color,.5); }
	}

	// all icons and other graphical elements
	.popup-inactive-menu-item {
		color: $fg_color;

		&:insensitive { color: transparentize($fg_color,0.5); }
	}

	//.popup-status-menu-item { font-weight: normal;  color: pink; } //dunno what that is
	&.panel-menu {
		-boxpointer-gap: $base_margin; // distance from the panel
		margin-bottom: 1.75em;
	}

	// symbolic icons in popover
	.popup-menu-arrow,
	.popup-menu-icon { icon-size: $base_icon_size; }
}

.popup-menu-ornament {
	text-align: right;
	width: 1.2em;
}

.popup-menu-boxpointer,
.candidate-popup-boxpointer {
	-arrow-border-radius: $base_border_radius+4;
	-arrow-background-color: $bg_color;
	-arrow-border-width: 1px;
	-arrow-border-color: if($variant=='light', $bg_color, $bubble_borders_color);
	-arrow-base: 24px;
	-arrow-rise: 11px;
	-arrow-box-shadow: 0 1px 3px rgba(0,0,0,0.5); //dreaming. bug #689995
}

.popup-separator-menu-item {
	//-margin-horizontal: 24px;
	height: 1px; //not really the whole box
	margin: 6px 64px;
	background-color: transparent;
	border-color: $bubble_borders_color;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

// Desktop background menu
.background-menu { -boxpointer-gap: $base_margin; -arrow-rise: 0px; }


// Rename popup
.rename-folder-popup {
	.rename-folder-popup-item {
		spacing: $base_spacing;
		&:ltr, &:rtl { padding: 0, $base_padding * 2; }
	}
}

/* fallback menu
- odd thing for styling App menu when apparently not running under shell. Light Adwaita styled app menu inside the main app window itself rather than the top bar
*/

// App menu
.app-menu,
.app-well-menu {
	max-width: 27.25em;
}

// System status menu
.aggregate-menu {
	min-width: 21em;

	// lock screen, shutdown, etc. buttons
	.popup-menu-icon { 
		padding:0;
		margin: 0 $base_margin;
		-st-icon-style: symbolic;
	}

	.popup-sub-menu .popup-menu-item > :first-child {
		// account for icons in submenus with padding
		&:ltr {
			padding-left: $base_padding + $base_margin * 2; 
			margin-left: $base_icon_size;
		}
		&:rtl {
			padding-right: $base_padding + $base_margin * 2; ;
			margin-right: $base_icon_size;
		}
	}
}